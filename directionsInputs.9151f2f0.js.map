{"version":3,"sources":["src/directionsInputs.js"],"names":["MVCObject","DirectionsInputs","woosmap","utils","originInput","destinationInput","originLatlng","destinationLatlng","originDestination","origindestinationText","originText","destinationText","hasToUpdateInputValues","initSearchBox","document","querySelector","addEventListener","switch","updateOriginDestination","input","locationType","autocomplete","google","maps","places","Autocomplete","types","hasDownBeenPressed","e","keyCode","event","addDomListener","cancelBubble","hasRanOnce","preventDefault","trigger","target","stopPropagation","addListener","place","getPlace","geometry","location","lng","lat","join","name","focus","blur","tmpOrigin","tmpOriginText","value","get","origin","destination","classList","add","set"],"mappings":"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","file":"directionsInputs.9151f2f0.js","sourceRoot":"..","sourcesContent":["export class DirectionsInputs extends woosmap.utils.MVCObject {\n  constructor(originInput, destinationInput, originLatlng, destinationLatlng) {\n    super();\n    this.originDestination = {};\n    this.origindestinationText = {};\n    this.originText = \"\";\n    this.destinationText = \"\";\n    this.originInput = originInput;\n    this.destinationInput = destinationInput;\n    this.hasToUpdateInputValues = true;\n    this.originLatlng = originLatlng || {};\n    this.destinationLatlng = destinationLatlng || {};\n    this.initSearchBox(this.originInput, \"origin\");\n    this.initSearchBox(this.destinationInput, \"destination\");\n    document\n      .querySelector(\".toggle-origin-destination\")\n      .addEventListener(\"click\", () => this.switch());\n    this.updateOriginDestination();\n  }\n\n  initSearchBox(input, locationType) {\n    const autocomplete = new google.maps.places.Autocomplete(input, {\n      types: [\"geocode\"]\n    });\n    let hasDownBeenPressed = false;\n    input.addEventListener(\"keydown\", (e) => {\n      if (e.keyCode === 40) {\n        hasDownBeenPressed = true;\n      }\n    });\n    google.maps.event.addDomListener(input, \"keydown\", (e) => {\n      e.cancelBubble = true;\n      if (e.keyCode === 13 || e.keyCode === 9) {\n        if (!hasDownBeenPressed && !e.hasRanOnce) {\n          e.preventDefault();\n          google.maps.event.trigger(e.target, \"keydown\", {\n            keyCode: 40,\n            stopPropagation: () => void 0,\n            preventDefault: () => void 0,\n            hasRanOnce: true\n          });\n        }\n      }\n    });\n    autocomplete.addListener(\"place_changed\", () => {\n      const place = autocomplete.getPlace();\n      hasDownBeenPressed = false;\n      if (!place.geometry) {\n        return;\n      }\n      const location = [\n        place.geometry.location.lng(),\n        place.geometry.location.lat()\n      ];\n      switch (locationType) {\n        case \"origin\":\n          this.originLatlng = location.join(\",\");\n          this.originText = place.name;\n          this.destinationInput.focus();\n          break;\n        case \"destination\":\n          this.destinationLatlng = location.join(\",\");\n          this.destinationText = place.name;\n          this.destinationInput.blur();\n          break;\n        default:\n          break;\n      }\n      this.updateOriginDestination();\n    });\n  }\n\n  switch() {\n    const tmpOrigin = this.originLatlng;\n    const tmpOriginText = this.originText;\n\n    this.originLatlng = this.destinationLatlng;\n    this.destinationLatlng = tmpOrigin;\n    this.originText = this.destinationText;\n    this.destinationText = tmpOriginText;\n    this.originInput.value = this.originText;\n    this.destinationInput.value = this.destinationText;\n\n    this.updateOriginDestination();\n  }\n\n  origindestinationText_changed() {\n    if (this.hasToUpdateInputValues) {\n      this.originInput.value = this.originText = this.get(\n        \"origindestinationText\"\n      ).originText;\n      this.destinationInput.value = this.destinationText = this.get(\n        \"origindestinationText\"\n      ).destinationText;\n    }\n  }\n\n  originDestination_changed() {\n    this.originLatlng = this.get(\"originDestination\").origin;\n    this.destinationLatlng = this.get(\"originDestination\").destination;\n  }\n\n  updateOriginDestination() {\n    if (this.originLatlng && this.destinationLatlng) {\n      document.querySelector(\"#routes\").classList.add(\"loading\");\n      this.set(\"originDestination\", {\n        origin: this.originLatlng,\n        destination: this.destinationLatlng\n      });\n      this.hasToUpdateInputValues = false;\n      this.set(\"origindestinationText\", {\n        originText: this.originText,\n        destinationText: this.destinationText\n      });\n      this.hasToUpdateInputValues = true;\n    }\n  }\n}\n"]}